# 🌐 跨平台开发前世今生

## 1️⃣ 跨平台开发的前世

### 1.1 初期（2000–2010）

* **工具**：J2ME、Windows Mobile、Symbian
* **特点**：

    * 各平台有自己的 SDK
    * 目标：一次开发，部署多平台
    * 方案局限性：UI 与平台强绑定，开发效率低
* **启示**：

    * 早期跨平台主要关注“逻辑复用”，UI 难统一

### 1.2 混合开发阶段（2010–2015）

* **工具**：Cordova / PhoneGap / Ionic
* **特点**：

    * 使用 Web 技术（HTML/CSS/JS）开发 App
    * UI 在 WebView 渲染
    * 插件调用原生 API
* **优点**：

    * 开发成本低，快速迭代
* **缺点**：

    * 性能不如原生，UI 动画和流畅度受限
* **启示**：

    * UI 渲染与原生解耦的思路开始出现

### 1.3 跨平台原生桥接阶段（2015–2020）

* **工具**：React Native、Xamarin
* **特点**：

    * JS / C# 驱动逻辑，UI 渲染原生控件
    * 性能提升，体验接近原生
* **优点**：

    * UI 原生化，逻辑复用率高
    * 热重载提高开发效率
* **缺点**：

    * 桥接通信仍有性能开销
    * 插件生态和原生模块维护成本高

### 1.4 自绘渲染阶段（2020–至今）

* **工具**：Flutter
* **特点**：

    * Dart + 自绘控件（Skia）渲染 UI
    * 跨平台一致性高，性能接近原生
    * 支持移动端、Web、桌面
* **启示**：

    * 跨平台开发演进目标：**一次开发，高性能，全平台一致体验**

## 2️⃣ 跨平台开发拓展知识

### 2.1 架构与层次

* **逻辑层与 UI 层分离**：

    * KMP、Flutter 都强调业务逻辑可复用
    * UI 层可选择原生（KMP）或自绘（Flutter）
* **模块化**：

    * Flutter：插件机制 + Package
    * KMP：共享逻辑模块 + 原生 UI
    * .NET MAUI：单一项目 + 多端 UI 抽象

### 2.2 性能优化思路

* 减少 UI 层桥接调用（React Native）
* 自绘 UI 避免平台差异（Flutter）
* 异步逻辑优化，避免阻塞主线程
* 数据缓存策略：SQLite / Hive / SharedPreferences

### 2.3 热重载与开发效率

* React Native / Flutter 支持热重载
* Flutter 优势：

    * 状态保留，UI 即时刷新
    * 跨平台一致性高

### 2.4 跨平台差异意识

* UI 风格：Material vs Cupertino vs 原生
* 权限机制：Android Manifest vs iOS Info.plist
* 插件差异：部分平台支持有限
* Flutter 优势：

    * 插件统一封装，逻辑与平台解耦
    * 对服务端工程师更友好，专注业务逻辑

### 2.5 技术趋势

1. **逻辑复用 + 自绘 UI** → Flutter
2. **逻辑复用 + 原生 UI** → KMP
3. **企业生态统一 + UI 抽象** → .NET MAUI
4. **目标**：一次开发，多端高性能运行，用户体验一致

## 3️⃣ 小结

| 阶段   | 框架 / 技术                | 特点                | 对 Flutter 启示   |
| ---- | ---------------------- | ----------------- | -------------- |
| 初期   | J2ME / WinMobile       | 逻辑复用，UI 平台绑定      | UI 难统一，逻辑复用是核心 |
| 混合开发 | Cordova / Ionic        | WebView 渲染，插件调用原生 | UI 与逻辑解耦，性能受限  |
| 桥接原生 | React Native / Xamarin | JS/C# 驱动，原生控件     | UI 原生化，逻辑复用    |
| 自绘渲染 | Flutter                | Dart + Skia，自绘控件  | 高性能，一次开发多端一致   |

💡 **核心结论**：

* 跨平台开发经历了 **逻辑复用 → UI 渲染解耦 → 桥接原生 → 自绘渲染** 的演进
* Flutter 是跨平台开发的新阶段，结合了混合开发和桥接原生的经验
* 对服务端工程师：理解演进脉络，能快速掌握 Flutter 插件、状态管理和跨端思维

